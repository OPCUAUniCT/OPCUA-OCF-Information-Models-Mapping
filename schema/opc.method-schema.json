{
	"id":"http://www.unictschema.it/opc.method-schema.json",
	"$schema": "http://json-schema.org/draft-04/schema#",
	"description": "The JSON Schema defined for OPC UA Method Nodes",
	"title": "OPC UA Method Node Representation",
	"definitions": {
		"x.opc.method":{
			"type": "object",
			"properties": {
				"OPCInputArguments": { "$ref": "#/definitions/x.opc.arguments" },
				"OPCOutputArguments": { "$ref": "#/definitions/x.opc.arguments" },
				"OPCDescription": {
					"type": "string",
					"description": "This property correspond to the OPC UA Description attribute of the OPC UA Node represented"
				},
				"OPCProperties": {
					"type": "array",
					"items": { 
						"oneOf": [
							{
								"type": "object",
								"properties": {
									"opc-property-name": { "type": "string" },
									"opc-property-number-value": { "type": "number" },
									"enum-strings": {
										"type": "array",
										"items": {	"type": "string" },
										"minItems": 1
									} 
								},
								"required": ["opc-property-name", "opc-property-number-value"]
							},
							{
								"type": "object",
								"properties": {
									"opc-property-name": { "type": "string" },
									"opc-property-string-value": { "type": "string" } 
								},
								"required": ["opc-property-name", "opc-property-string-value"]
							},
							{
								"type": "object",
								"properties": {
									"opc-property-name": { "type": "string" },
									"opc-property-bool-value": { "type": "boolean" } 
								},
								"required": ["opc-property-name", "opc-property-bool-value"]
							},
							{
								"type": "object",
								"properties": {
									"opc-property-name": { "type": "string" },
									"opc-property-array-value": { "$ref": "#/definitions/x.opc.array-value" } ,
									"num-dimensions": { "type": "integer" },
									"innermost-type": {
										"type": "string",
										"enum": ["number", "string", "boolean", "object"]
									},
									"enum-strings": {
										"type": "array",
										"items": {	"type": "string" },
										"minItems": 1
									} 
								},
								"required": ["opc-property-name", "opc-property-array-value", "num-dimensions", "innermost-type"]
							},
							{
								"type": "object",
								"properties": {
									"opc-property-name": { "type": "string" },
									"opc-property-struct-value": { "$ref": "#/definitions/x.opc.struct-value" } 
								},
								"required": ["opc-property-name", "opc-property-struct-value"]
							}
						]
					},
					"minItems": 1,
					"description": "A list of OPC UA Property in a JSON format"
				}
			},
			"required": ["OPCInputArguments", "OPCOutputArguments"]
        },
        "x.opc.arguments": {
            "type": "array",
            "items": { 
                "oneOf": [
                    {
                        "type": "object",
                        "properties": {
                            "opc-argument-name": { "type": "string" },
                            "opc-argument-number-value": { "type": "number" },
                            "enum-strings": {
                                "type": "array",
                                "items": {	"type": "string" },
                                "minItems": 1
                            } 
                        },
                        "required": ["opc-argument-name", "opc-argument-number-value"]
                    },
                    {
                        "type": "object",
                        "properties": {
                            "opc-argument-name": { "type": "string" },
                            "opc-argument-string-value": { "type": "string" } 
                        },
                        "required": ["opc-argument-name", "opc-argument-string-value"]
                    },
                    {
                        "type": "object",
                        "properties": {
                            "opc-argument-name": { "type": "string" },
                            "opc-argument-bool-value": { "type": "boolean" } 
                        },
                        "required": ["opc-argument-name", "opc-argument-bool-value"]
                    },
                    {
                        "type": "object",
                        "properties": {
                            "opc-argument-name": { "type": "string" },
                            "opc-argument-array-value": { "$ref": "#/definitions/x.opc.array-value" } ,
                            "num-dimensions": { "type": "integer" },
                            "innermost-type": {
                                "type": "string",
                                "enum": ["number", "string", "boolean", "object"]
                            },
                            "enum-strings": {
                                "type": "array",
                                "items": {	"type": "string" },
                                "minItems": 1
                            } 
                        },
                        "required": ["opc-argument-name", "opc-argument-array-value", "num-dimensions", "innermost-type"]
                    },
                    {
                        "type": "object",
                        "properties": {
                            "opc-argument-name": { "type": "string" },
                            "opc-argument-struct-value": { "$ref": "#/definitions/x.opc.struct-value" } 
                        },
                        "required": ["opc-argument-name", "opc-argument-struct-value"]
                    }
                ]
            },
            "description": "A list of OPC UA argument in a JSON format"
        },
		"x.opc.array-value": {
			"type": "array",
			"items": {
				"oneOf":[
					{ "type": "number" },
					{ "type": "string" },
					{ "type": "boolean" },
					{ "$ref": "#/definitions/x.opc.array-value" },
					{ "$ref": "#/definitions/x.opc.struct-value" }
				]
			}
		},
		"x.opc.struct-value": {
			"type": "object",
			"properties": {
				"fields": {
					"type": "array",
					"items": {
						"anyOf": [
							{ "$ref": "#/definitions/x.opc.number-field" },
							{ "$ref": "#/definitions/x.opc.string-field" },
							{ "$ref": "#/definitions/x.opc.bool-field" },
							{ "$ref": "#/definitions/x.opc.array-field" },
							{ "$ref": "#/definitions/x.opc.struct-field" }
						]
					},
					"minItems": 1
				}
			},
			"required": ["fields"]
		},
		"x.opc.number-field": {
			"type": "object",
			"properties": {
				"field-name": { "type": "string" },
				"field-number-value": { "type": "number" },
				"enum-strings": {
					"type": "array",
					"items": {	"type": "string" },
					"minItems": 1
				} 
			},
			"required": ["field-name", "field-number-value"]
		},
		"x.opc.string-field": {
			"type": "object",
			"properties": {
				"field-name": { "type": "string" },
				"field-string-value": { "type": "string" }
			},
			"required": ["field-name", "field-string-value"]
		}, 
		"x.opc.bool-field": {
			"type": "object",
			"properties": {
				"field-name": { "type": "string" },
				"field-bool-value": { "type": "boolean" }
			},
			"required": ["field-name", "field-bool-value"]
		}, 
		"x.opc.array-field": {
			"type": "object",
			"properties": {
				"field-name": { "type": "string" },
				"field-array-value": { "$ref": "#/definitions/x.opc.array-value" },
				"num-dimensions": { "type": "integer" },
				"innermost-type": {
					"type": "string",
					"enum": ["number", "string", "boolean", "object"]
				},
				"enum-strings": {
					"type": "array",
					"items": {	"type": "string" },
					"minItems": 1
				} 
			},
			"required": ["field-name", "field-array-value", "num-dimensions", "innermost-type"]
		}, 
		"x.opc.struct-field": {
			"type": "object",
			"properties": {
				"field-name": { "type": "string" },
				"field-struct-value": { "$ref": "#/definitions/x.opc.struct-value" }
			},
			"required": ["field-name", "field-struct-value"]
		} 
	},
	"type": "object",
	"allOf": [
		{"$ref": "oic.core.json#/definitions/oic.core"},
		{"$ref": "#/definitions/x.opc.method"}	
	]
}
