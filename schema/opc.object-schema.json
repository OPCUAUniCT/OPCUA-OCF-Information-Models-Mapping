{
	"id":"http://www.unictschema.it/opc.object-schema.json",
	"$schema": "http://json-schema.org/draft-04/schema#",
	"description": "The JSON Schema defined for OPC UA Nodes of ObjectType or FolderType",
	"title": "OPC UA Object or Folder Node Representation",
	"definitions": {
		"x.opc.object":{
			"type": "object",
			"properties": {
				"OPCNodeType": {
					"type": "string",
					"enum": ["folder","object"],
					"description": "This property indicates if the OPC UA Node represented belongs to the OPC UA FolderType or to the OPC UA ObjectType"
				},
				"OPCDescription":{
					"type": "string",
					"description": "This property correspond to the OPC UA Description attribute of the OPC UA Node represented"
				},
				"OPCProperties": {
					"type": "array",
					"items": { 
						"oneOf": [
							{
								"type": "object",
								"properties": {
									"opc-property-name": { "type": "string" },
									"opc-property-number-value": { "type": "number" },
									"enum-strings": {
										"type": "array",
										"items": {	"type": "string" },
										"minItems": 1
									} 
								},
								"required": ["opc-property-name", "opc-property-number-value"],
								"additionalProperties": false
							},
							{
								"type": "object",
								"properties": {
									"opc-property-name": { "type": "string" },
									"opc-property-string-value": { "type": "string" } 
								},
								"required": ["opc-property-name", "opc-property-string-value"],
								"additionalProperties": false
							},
							{
								"type": "object",
								"properties": {
									"opc-property-name": { "type": "string" },
									"opc-property-bool-value": { "type": "boolean" } 
								},
								"required": ["opc-property-name", "opc-property-bool-value"],
								"additionalProperties": false
							},
							{
								"type": "object",
								"properties": {
									"opc-property-name": { "type": "string" },
									"opc-property-array-value": { "$ref": "#/definitions/x.opc.array-value" } ,
									"num-dimensions": { "type": "integer" },
									"innermost-type": {
										"type": "string",
										"enum": ["number", "string", "boolean", "object"]
									},
									"enum-strings": {
										"type": "array",
										"items": {	"type": "string" },
										"minItems": 1
									} 
								},
								"required": ["opc-property-name", "opc-property-array-value", "num-dimensions", "innermost-type"],
								"additionalProperties": false
							},
							{
								"type": "object",
								"properties": {
									"opc-property-name": { "type": "string" },
									"opc-property-struct-value": { "$ref": "#/definitions/x.opc.struct-value" } 
								},
								"required": ["opc-property-name", "opc-property-struct-value"],
								"additionalProperties": false
							}
						]
					},
					"minItems": 1,
					"description": "A list of OPC UA Property in a JSON format"
				}
			},
			"required": ["OPCNodeType"]
		},
		"x.opc.array-value": {
			"type": "array",
			"items": {
				"oneOf":[
					{ "type": "number" },
					{ "type": "string" },
					{ "type": "boolean" },
					{ "$ref": "#/definitions/x.opc.array-value" },
					{ "$ref": "#/definitions/x.opc.struct-value" }
				]
			}
		},
		"x.opc.struct-value": {
			"type": "object",
			"properties": {
				"fields": {
					"type": "array",
					"items": {
						"oneOf": [
							{ "$ref": "#/definitions/x.opc.number-field" },
							{ "$ref": "#/definitions/x.opc.string-field" },
							{ "$ref": "#/definitions/x.opc.bool-field" },
							{ "$ref": "#/definitions/x.opc.array-field" },
							{ "$ref": "#/definitions/x.opc.struct-field" }
						]
					},
					"minItems": 1
				}
			},
			"required": ["fields"]
		},
		"x.opc.number-field": {
			"type": "object",
			"properties": {
				"field-name": { "type": "string" },
				"field-number-value": { "type": "number" },
				"enum-strings": {
					"type": "array",
					"items": {	"type": "string" },
					"minItems": 1
				} 
			},
			"required": ["field-name", "field-number-value"],
			"additionalProperties": false
		},
		"x.opc.string-field": {
			"type": "object",
			"properties": {
				"field-name": { "type": "string" },
				"field-string-value": { "type": "string" }
			},
			"required": ["field-name", "field-string-value"],
			"additionalProperties": false
		}, 
		"x.opc.bool-field": {
			"type": "object",
			"properties": {
				"field-name": { "type": "string" },
				"field-bool-value": { "type": "boolean" }
			},
			"required": ["field-name", "field-bool-value"],
			"additionalProperties": false
		}, 
		"x.opc.array-field": {
			"type": "object",
			"properties": {
				"field-name": { "type": "string" },
				"field-array-value": { "$ref": "#/definitions/x.opc.array-value" },
				"num-dimensions": { "type": "integer" },
				"innermost-type": {
					"type": "string",
					"enum": ["number", "string", "boolean", "object"]
				},
				"enum-strings": {
					"type": "array",
					"items": {	"type": "string" },
					"minItems": 1
				} 
			},
			"required": ["field-name", "field-array-value", "num-dimensions", "innermost-type"],
			"additionalProperties": false
		}, 
		"x.opc.struct-field": {
			"type": "object",
			"properties": {
				"field-name": { "type": "string" },
				"field-struct-value": { "$ref": "#/definitions/x.opc.struct-value" }
			},
			"required": ["field-name", "field-struct-value"],
			"additionalProperties": false
		} 
	},
	"type": "object",
	"allOf": [
		{"$ref": "oic.core.json#/definitions/oic.core"},
		{"$ref": "#/definitions/x.opc.object"}	
	]
}
